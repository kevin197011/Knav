# Copyright (c) 2025 kk
#
# This software is released under the MIT License.
# https://opensource.org/licenses/MIT

# è¿ç»´å¯¼èˆªç³»ç»Ÿ (KK Guide)

> ä¸€ä¸ªè½»é‡çº§çš„è¿ç»´å¯¼èˆªç®¡ç†ç³»ç»Ÿï¼ŒåŸºäº Ruby Sinatra æ„å»ºï¼Œæä¾›ç®€æ´çš„å‰ç«¯å±•ç¤ºå’Œå¼ºå¤§çš„åå°ç®¡ç†åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¯ **åˆ†ç±»ç®¡ç†** - çµæ´»çš„è‡ªå®šä¹‰å¯¼èˆªåˆ†ç±»
- ğŸ”— **é“¾æ¥ç®¡ç†** - å®Œæ•´çš„ CRUD æ“ä½œï¼Œæ”¯æŒå›¾æ ‡ã€æè¿°ã€æ’åº
- ğŸ¨ **ç°ä»£åŒ–ç•Œé¢** - å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæµ…è‰²ä¸»é¢˜
- ğŸ” **æ™ºèƒ½è¿‡æ»¤** - æŒ‰åˆ†ç±»ç­›é€‰é“¾æ¥
- âœï¸ **åœ¨çº¿ç¼–è¾‘** - å®æ—¶ç¼–è¾‘åˆ†ç±»å’Œé“¾æ¥
- ğŸ”” **å‹å¥½æç¤º** - ç»Ÿä¸€çš„æ“ä½œåé¦ˆç³»ç»Ÿ
- ğŸ” **å®‰å…¨è®¤è¯** - ç®¡ç†å‘˜æƒé™æ§åˆ¶
- ğŸ³ **å®¹å™¨åŒ–** - Docker ä¸€é”®éƒ¨ç½²

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Docker éƒ¨ç½² (æ¨è)

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd kk-guide

# ä¸€é”®éƒ¨ç½²
./deploy.sh
```

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
bundle install

# å¯åŠ¨æœåŠ¡
ruby app.rb

# è®¿é—®åº”ç”¨
open http://localhost:4567
```

## ğŸ“– ä½¿ç”¨è¯´æ˜

### é»˜è®¤è´¦æˆ·
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`

### è®¿é—®åœ°å€
- **å‰ç«¯å±•ç¤º**: http://localhost:4567/
- **ç®¡ç†åå°**: http://localhost:4567/admin

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **åç«¯** | Ruby + Sinatra | è½»é‡çº§ Web æ¡†æ¶ |
| **æ•°æ®åº“** | SQLite3 | åµŒå…¥å¼æ•°æ®åº“ |
| **å‰ç«¯** | Tailwind CSS | ç°ä»£åŒ–æ ·å¼æ¡†æ¶ |
| **å®¹å™¨åŒ–** | Docker | åº”ç”¨å®¹å™¨åŒ– |
| **ä»£ç†** | Nginx | åå‘ä»£ç† (å¯é€‰) |

## ğŸ“ é¡¹ç›®ç»“æ„

```
kk-guide/
â”œâ”€â”€ app.rb                 # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”œâ”€â”€ lib/                  # æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ controllers/      # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ helpers/         # è¾…åŠ©æ–¹æ³•
â”‚   â”œâ”€â”€ routes/          # è·¯ç”±å®šä¹‰
â”‚   â””â”€â”€ views/           # è§†å›¾æ¨¡æ¿
â”œâ”€â”€ docker-compose.yml   # Docker ç¼–æ’
â”œâ”€â”€ Dockerfile          # å®¹å™¨æ„å»º
â””â”€â”€ nginx/              # Nginx é…ç½®
```

## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡

| å˜é‡ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `RACK_ENV` | development | è¿è¡Œç¯å¢ƒ |
| `SESSION_SECRET` | è‡ªåŠ¨ç”Ÿæˆ | ä¼šè¯å¯†é’¥ |
| `DATABASE_PATH` | knav.db | æ•°æ®åº“è·¯å¾„ |
| `TZ` | Asia/Shanghai | æ—¶åŒºè®¾ç½® |

### æ•°æ®åº“ç»“æ„

#### categories è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”® |
| name | TEXT | åˆ†ç±»åç§° |
| description | TEXT | åˆ†ç±»æè¿° |
| sort_order | INTEGER | æ’åº |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

#### nav_links è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”® |
| title | TEXT | é“¾æ¥æ ‡é¢˜ |
| url | TEXT | é“¾æ¥åœ°å€ |
| description | TEXT | é“¾æ¥æè¿° |
| category_id | INTEGER | åˆ†ç±»ID |
| icon | TEXT | å›¾æ ‡ |
| sort_order | INTEGER | æ’åº |
| is_active | BOOLEAN | æ˜¯å¦å¯ç”¨ |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

## ğŸ“š API æ¥å£

### åˆ†ç±»ç®¡ç†
- `GET /admin/categories` - åˆ†ç±»åˆ—è¡¨
- `POST /admin/categories` - åˆ›å»ºåˆ†ç±»
- `PUT /admin/categories/:id` - æ›´æ–°åˆ†ç±»
- `DELETE /admin/categories/:id` - åˆ é™¤åˆ†ç±»

### é“¾æ¥ç®¡ç†
- `GET /admin/links` - é“¾æ¥åˆ—è¡¨
- `POST /admin/links` - åˆ›å»ºé“¾æ¥
- `PUT /admin/links/:id` - æ›´æ–°é“¾æ¥
- `PUT /admin/links/:id/toggle` - åˆ‡æ¢çŠ¶æ€
- `DELETE /admin/links/:id` - åˆ é™¤é“¾æ¥

## ğŸ³ Docker éƒ¨ç½²

### ç®€åŒ–ç‰ˆæœ¬ (ä»…åº”ç”¨)
```bash
docker-compose -f docker-compose.simple.yml up -d
```

### å®Œæ•´ç‰ˆæœ¬ (åº”ç”¨ + Nginx)
```bash
docker-compose up -d
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç ** - é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹ç®¡ç†å‘˜å¯†ç 
2. **ä½¿ç”¨å¼ºå¯†é’¥** - è®¾ç½®å¼ºéšæœºä¼šè¯å¯†é’¥
3. **é…ç½®é˜²ç«å¢™** - é™åˆ¶è®¿é—®ç«¯å£
4. **å®šæœŸå¤‡ä»½** - å¤‡ä»½æ•°æ®åº“æ–‡ä»¶
5. **æ›´æ–°ä¾èµ–** - å®šæœŸæ›´æ–°å®‰å…¨è¡¥ä¸

## ğŸ“Š ç›‘æ§ä¸ç»´æŠ¤

### å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:4567/health

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f knav-app
```

### æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®åº“
cp data/knav.db backup/navigation_$(date +%Y%m%d_%H%M%S).db

# æ¢å¤æ•°æ®åº“
cp backup/navigation_20231201_120000.db data/knav.db
```

## ğŸ¤ è´¡çŒ®

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ¯ åŸºç¡€åˆ†ç±»å’Œé“¾æ¥ç®¡ç†
- ğŸ¨ å“åº”å¼å‰ç«¯ç•Œé¢
- ğŸ³ Docker å®¹å™¨åŒ–æ”¯æŒ
- ğŸ” å®Œæ•´ç®¡ç†åå°

## ğŸ’¬ æ”¯æŒ

- ğŸ“– [æ–‡æ¡£](docs/)
- ğŸ› [é—®é¢˜åé¦ˆ](../../issues)
- ğŸ’¡ [åŠŸèƒ½å»ºè®®](../../issues)

---

**KK Guide Team** - è®©è¿ç»´å¯¼èˆªæ›´ç®€å•ï¼ ğŸš€